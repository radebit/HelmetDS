<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.radebit.project.helmetds.mapper.HUserInfoMapper">
    
    <resultMap type="HUserInfo" id="HUserInfoResult">
        <result property="userId"    column="user_id"    />
        <result property="realName"    column="real_name"    />
        <result property="idNumber"    column="id_number"    />
        <result property="picFace"    column="pic_face"    />
        <result property="picHelmet"    column="pic_helmet"    />
        <result property="picZj"    column="pic_zj"    />
        <result property="birthday"    column="birthday"    />
        <result property="homeAddress"    column="home_address"    />
        <result property="entryTime"    column="entry_time"    />
        <result property="founder"    column="founder"    />
        <result property="remarks"    column="remarks"    />
        <result property="createTime"    column="create_time"    />
        <result property="updateTime"    column="update_time"    />
    </resultMap>

    <sql id="selectHUserInfoVo">
        select user_id, real_name, id_number, pic_face, pic_helmet, pic_zj, birthday, home_address, entry_time, founder, remarks, create_time, update_time from h_user_info
    </sql>

    <select id="selectHUserInfoList" parameterType="HUserInfo" resultMap="HUserInfoResult">
        <include refid="selectHUserInfoVo"/>
        <where>  
            <if test="userId != null "> and user_id = #{userId}</if>
            <if test="realName != null  and realName != ''"> and real_name like concat('%', #{realName}, '%')</if>
            <if test="idNumber != null  and idNumber != ''"> and id_number = #{idNumber}</if>
            <if test="picFace != null  and picFace != ''"> and pic_face = #{picFace}</if>
            <if test="picHelmet != null  and picHelmet != ''"> and pic_helmet = #{picHelmet}</if>
            <if test="picZj != null  and picZj != ''"> and pic_zj = #{picZj}</if>
            <if test="params.beginBirthday != null and params.beginBirthday != '' and params.endBirthday != null and params.endBirthday != ''"> and birthday between #{params.beginBirthday} and #{params.endBirthday}</if>
            <if test="homeAddress != null  and homeAddress != ''"> and home_address like concat('%', #{homeAddress}, '%')</if>
            <if test="params.beginEntryTime != null and params.beginEntryTime != '' and params.endEntryTime != null and params.endEntryTime != ''"> and entry_time between #{params.beginEntryTime} and #{params.endEntryTime}</if>
            <if test="founder != null "> and founder = #{founder}</if>
            <if test="remarks != null  and remarks != ''"> and remarks = #{remarks}</if>
            <if test="params.beginCreateTime != null and params.beginCreateTime != '' and params.endCreateTime != null and params.endCreateTime != ''"> and create_time between #{params.beginCreateTime} and #{params.endCreateTime}</if>
        </where>
    </select>
    
    <select id="selectHUserInfoById" parameterType="Long" resultMap="HUserInfoResult">
        <include refid="selectHUserInfoVo"/>
        where user_id = #{userId}
    </select>
        
    <insert id="insertHUserInfo" parameterType="HUserInfo">
        insert into h_user_info
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="userId != null ">user_id,</if>
            <if test="realName != null  and realName != ''">real_name,</if>
            <if test="idNumber != null  and idNumber != ''">id_number,</if>
            <if test="picFace != null  and picFace != ''">pic_face,</if>
            <if test="picHelmet != null  and picHelmet != ''">pic_helmet,</if>
            <if test="picZj != null  and picZj != ''">pic_zj,</if>
            <if test="birthday != null ">birthday,</if>
            <if test="homeAddress != null  and homeAddress != ''">home_address,</if>
            <if test="entryTime != null ">entry_time,</if>
            <if test="founder != null ">founder,</if>
            <if test="remarks != null  and remarks != ''">remarks,</if>
            <if test="createTime != null ">create_time,</if>
            <if test="updateTime != null ">update_time,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="userId != null ">#{userId},</if>
            <if test="realName != null  and realName != ''">#{realName},</if>
            <if test="idNumber != null  and idNumber != ''">#{idNumber},</if>
            <if test="picFace != null  and picFace != ''">#{picFace},</if>
            <if test="picHelmet != null  and picHelmet != ''">#{picHelmet},</if>
            <if test="picZj != null  and picZj != ''">#{picZj},</if>
            <if test="birthday != null ">#{birthday},</if>
            <if test="homeAddress != null  and homeAddress != ''">#{homeAddress},</if>
            <if test="entryTime != null ">#{entryTime},</if>
            <if test="founder != null ">#{founder},</if>
            <if test="remarks != null  and remarks != ''">#{remarks},</if>
            <if test="createTime != null ">#{createTime},</if>
            <if test="updateTime != null ">#{updateTime},</if>
         </trim>
    </insert>

    <update id="updateHUserInfo" parameterType="HUserInfo">
        update h_user_info
        <trim prefix="SET" suffixOverrides=",">
            <if test="realName != null  and realName != ''">real_name = #{realName},</if>
            <if test="idNumber != null  and idNumber != ''">id_number = #{idNumber},</if>
            <if test="picFace != null  and picFace != ''">pic_face = #{picFace},</if>
            <if test="picHelmet != null  and picHelmet != ''">pic_helmet = #{picHelmet},</if>
            <if test="picZj != null  and picZj != ''">pic_zj = #{picZj},</if>
            <if test="birthday != null ">birthday = #{birthday},</if>
            <if test="homeAddress != null  and homeAddress != ''">home_address = #{homeAddress},</if>
            <if test="entryTime != null ">entry_time = #{entryTime},</if>
            <if test="founder != null ">founder = #{founder},</if>
            <if test="remarks != null  and remarks != ''">remarks = #{remarks},</if>
            <if test="createTime != null ">create_time = #{createTime},</if>
            <if test="updateTime != null ">update_time = #{updateTime},</if>
        </trim>
        where user_id = #{userId}
    </update>

    <delete id="deleteHUserInfoById" parameterType="Long">
        delete from h_user_info where user_id = #{userId}
    </delete>

    <delete id="deleteHUserInfoByIds" parameterType="String">
        delete from h_user_info where user_id in 
        <foreach item="userId" collection="array" open="(" separator="," close=")">
            #{userId}
        </foreach>
    </delete>
    
</mapper>